<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Spin Anak Ekstra TIK SDN Karangtejo</title>

<style>

body{
  font-family:Arial, sans-serif;
  background:#eef6ff;
  text-align:center;
  margin:0;
  padding:20px;
}

h1{
  color:#1f3c88;
}

.container{
  display:flex;
  justify-content:center;
  gap:40px;
  margin-top:20px;
}

/* RODA */
#wheel{
  width:300px;
  height:300px;
  border-radius:50%;
  border:12px solid #333;
  position:relative;
  margin:auto;
}

/* PANAH */
#arrow{
  width:0;
  height:0;
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-bottom:25px solid red;
  margin:auto;
}

/* BUTTON */
button{
  margin-top:15px;
  padding:12px 25px;
  font-size:16px;
  border:none;
  background:#2196f3;
  color:white;
  border-radius:8px;
  cursor:pointer;
}

button:hover{
  background:#1976d2;
}

/* LIST */
.list{
  width:320px;
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 0 6px rgba(0,0,0,0.2);
  text-align:left;
}

#result{
  margin-top:10px;
  font-weight:bold;
  font-size:18px;
  color:#e91e63;
}

</style>
</head>

<body>

<h1>ðŸŽ¯ Spin Anak Ekstra TIK SDN Karangtejo</h1>

<div id="arrow"></div>

<div class="container">

<!-- AREA SPIN -->
<div>

  <div id="wheel"></div>

  <button onclick="spin()">SPIN</button>

  <div id="result"></div>

</div>

<!-- AREA LIST -->
<div class="list" id="listArea">

<h3>Sudah Terpilih</h3>
<p>Belum ada</p>

</div>

</div>

<!-- SUARA -->
<audio id="sound" preload="auto">
  <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
</audio>

<script>

/* DATA KELOMPOK */
const kelompok = [

{nama:"Kelompok 1", anak:["ALDEVARO","HISYAM","ZULVIA"]},
{nama:"Kelompok 2", anak:["ROHMAD","ALI","NITYA"]},
{nama:"Kelompok 3", anak:["MUAMMAR","ALZAM","ALESHA"]},
{nama:"Kelompok 4", anak:["WAFA","MALKAN","AZKIA"]},
{nama:"Kelompok 5", anak:["NAUVAL","RIZQI","LEVINA"]},
{nama:"Kelompok 6", anak:["RAFLI","NATHANAEL","RHADESKA"]},
{nama:"Kelompok 7", anak:["ARDAN","NIZAM","NAILA"]},
{nama:"Kelompok 8", anak:["ARU","PANDINI","SEFIA"]},
{nama:"Kelompok 9", anak:["EGA","AQILLA","ZAHROTUL"]},
{nama:"Kelompok 10", anak:["GIBRAN","KHANZA","ZUKY"]}

];


/* BUAT LIST SPIN */
let daftar = [];

kelompok.forEach(k=>{
  k.anak.forEach(a=>{
    daftar.push({
      kelompok:k.nama,
      nama:a
    });
  });
});

let sisa = [...daftar];
let keluar = [];

let rotasi = 0;

const colors = [
"#ff7675","#74b9ff","#55efc4","#ffeaa7",
"#fd79a8","#a29bfe","#fab1a0","#81ecec"
];


/* BUAT RODA */
function buatRoda(){

  let step = 360 / sisa.length;
  let bg = "";

  sisa.forEach((d,i)=>{

    let c = colors[i % colors.length];

    bg += `${c} ${i*step}% ${(i+1)*step}%,`;

  });

  let wheel = document.getElementById("wheel");

  wheel.style.background =
  "conic-gradient("+bg.slice(0,-1)+")";

  wheel.innerHTML = "";

  sisa.forEach((d,i)=>{

    let angle = step*i + step/2;

    let div = document.createElement("div");

    div.style.position="absolute";
    div.style.width="100%";
    div.style.height="100%";
    div.style.transform=`rotate(${angle}deg)`;

    div.innerHTML = `
    <span style="
      position:absolute;
      left:60%;
      top:50%;
      transform:translateY(-50%);
      font-size:11px;
      font-weight:bold;">
      ${d.nama}
    </span>`;

    wheel.appendChild(div);

  });

}

buatRoda();


/* SPIN */
function spin(){

  if(sisa.length==0){
    alert("Semua sudah terpilih!");
    return;
  }

  let sound = document.getElementById("sound");
  sound.play();

  let putar = 360*5 + Math.random()*360;

  rotasi += putar;

  document.getElementById("wheel").style.transition =
  "transform 3s ease-out";

  document.getElementById("wheel").style.transform =
  `rotate(${rotasi}deg)`;


  setTimeout(pilih,3000);

}


/* PILIH */
function pilih(){

  let deg = rotasi % 360;

  let step = 360 / sisa.length;

  let index =
  Math.floor((360-deg)/step) % sisa.length;

  let data = sisa[index];

  keluar.push(data);

  sisa.splice(index,1);

  document.getElementById("result").innerText =
  "ðŸŽ‰ "+data.kelompok+" - "+data.nama;

  tampilkanList();

  buatRoda();

}


/* TAMPILKAN LIST */
function tampilkanList(){

  let area = document.getElementById("listArea");

  let grup = {};

  keluar.forEach(d=>{

    if(!grup[d.kelompok]){
      grup[d.kelompok]=[];
    }

    grup[d.kelompok].push(d.nama);

  });

  let html="<h3>Sudah Terpilih</h3>";

  for(let k in grup){

    html += "<b>"+k+"</b><ul>";

    grup[k].forEach(n=>{
      html+="<li>"+n+"</li>";
    });

    html+="</ul>";

  }

  area.innerHTML = html;

}

</script>

</body>
</html>
