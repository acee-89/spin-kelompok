<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Spin Anak Ekstra TIK Kelas 5</title>

<style>

body{
  font-family:Arial,sans-serif;
  background:#eef7ff;
  text-align:center;
  padding:20px;
}

h1{color:#2c3e50;}

.container{
  display:flex;
  justify-content:center;
  gap:40px;
  margin-top:30px;
}

/* SPIN */
.spin-area{
  width:300px;
}

#wheel{
  width:260px;
  height:260px;
  border:10px solid #333;
  border-radius:50%;
  margin:auto;
  position:relative;
  transition:transform 4s ease-out;
}

#pointer{
  width:0;
  height:0;
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-bottom:25px solid red;
  margin:auto;
  margin-bottom:-5px;
}

button{
  margin-top:15px;
  padding:10px 25px;
  background:#0984e3;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

button:hover{background:#74b9ff;}

#result{
  margin-top:15px;
  font-weight:bold;
  font-size:18px;
}

/* DATA */
.list-area{
  width:320px;
  background:white;
  padding:15px;
  border-radius:10px;
  box-shadow:0 0 5px #aaa;
  text-align:left;
}

.list-area h3{text-align:center;}

ul{padding-left:20px;}

</style>
</head>

<body>

<h1>ðŸŽ¯ Spin Anak Ekstra TIK Kelas 5</h1>

<div class="container">

<!-- SPIN -->
<div class="spin-area">

<div id="pointer"></div>
<div id="wheel"></div>

<button onclick="spin()">SPIN</button>

<p id="result">Silakan mulai ðŸ˜Š</p>

</div>

<!-- LIST -->
<div class="list-area" id="listArea">

<h3>Sudah Terpilih</h3>
<p>Belum ada</p>

</div>

</div>

<!-- SOUND -->
<audio id="spinSound">
<source src="https://www.soundjay.com/mechanical/sounds/clock-ticking-1.mp3">
</audio>

<audio id="winSound">
<source src="https://www.soundjay.com/button/sounds/button-09.mp3">
</audio>


<script>

// ================== DATA SISWA ==================

let siswa = [

"ALDEVARO","HISYAM","ZULVIA",
"ROHMAD","ALI","NITYA",
"MUAMMAR","ALZAM","ALESHA",
"WAFA","MALKAN","AZKIA",
"NAUVAL","RIZQI","LEVINA",
"RAFLI","NATHANAEL","RHADESKA",
"ARDAN","NIZAM","NAILA",
"ARU","PANDINI","SEFIA",
"EGA","AQILLA","ZAHROTUL",
"GIBRAN","KHANZA","ZUKY"

];

// COPY UNTUK SPIN
let daftar = [...siswa];

// YANG SUDAH KELUAR
let keluar = [];

// WARNA
const colors = [
"#ff7675","#74b9ff","#55efc4","#ffeaa7",
"#fd79a8","#81ecec","#fab1a0","#a29bfe",
"#fdcb6e","#00cec9","#fd9644","#26de81"
];

// ================== BUAT RODA ==================

function buatRoda(){

  let step = 360 / daftar.length;
  let bg = "";

  daftar.forEach((n,i)=>{

    let c = colors[i % colors.length];

    let start = i * step;
    let end = (i+1)*step;

    bg += `${c} ${start}% ${end}%,`;

  });

  document.getElementById("wheel").style.background =
  "conic-gradient("+bg.slice(0,-1)+")";

}

buatRoda();


// ================== SPIN ==================

function spin(){

  if(daftar.length===0){
    alert("Semua anak sudah keluar!\nRefresh untuk ulang.");
    return;
  }

  let wheel = document.getElementById("wheel");

  let spinSound = document.getElementById("spinSound");
  let winSound = document.getElementById("winSound");

  spinSound.play();

  let deg = 3600 + Math.random()*1000;

  wheel.style.transform = `rotate(${deg}deg)`;

  setTimeout(()=>{

    spinSound.pause();
    spinSound.currentTime=0;

    winSound.play();

    let index = Math.floor(Math.random()*daftar.length);

    let nama = daftar[index];

    // HAPUS
    daftar.splice(index,1);
    keluar.push(nama);

    tampilkan(nama);
    tampilkanList();
    buatRoda();

  },4000);

}


// ================== OUTPUT ==================

function tampilkan(nama){

  document.getElementById("result").innerText =
  "ðŸŽ‰ Terpilih: "+nama;

}


function tampilkanList(){

  let area = document.getElementById("listArea");

  let html = "<h3>Sudah Terpilih</h3><ul>";

  keluar.forEach(n=>{
    html += "<li>"+n+"</li>";
  });

  html += "</ul>";

  area.innerHTML = html;

}

</script>

</body>
</html>
